{
  "_id":"_design/caliper",
  "language":"javascript",
  "views":{
    "events":{
      "map": "function(doc){\n  if(doc.type === 'caliperEvent'){\n    emit(doc._id, doc);\n  }\n}"
    },
    "users": {
      "map": "function(doc){\n  if(doc.type === 'user'){\n    if(doc.username){\n      emit({username:doc.username}, doc);\n    } \n    if(doc.openid){\n      emit({openid:doc.openid}, doc);\n    }\n  }\n}"
    },
    "apiKeys": {
      "map": "function(doc){\n  if(doc.type === 'user'){\n    if(doc.apiKey){\n      emit(doc.apiKey, doc);\n    }\n  }\n}"
    },
    "events_by_user": {
      "map": "function(doc){\n  if(doc.type === 'caliperEvent'){\n    emit([doc.scoped_caliper_user_id, doc.recieved], doc);\n  }\n}",
      "reduce": "function (key, values, rereduce) {\n    return values.length;\n}"
    }
  }
}
